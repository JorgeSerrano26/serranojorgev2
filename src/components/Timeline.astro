---
import items from "../data/experience.json";
---

<ol class="relative border-l border-gray-700">
	{
		items.map((item, index) => {
			const from = new Date(item.from);
			const today = item.to === "today";
			const to = today ? new Date() : new Date(item.to);
			const isLatest = index === 0;
			const isWork = item.type === "work";

			return (
				<li class="ml-6 [&:not(:last-child)]:mb-10">
					<span class="absolute p-0.5 flex items-center justify-center w-3 h-3 rounded-full -left-1.5 ring-4 ring-slate-400 bg-slate-50" />
					<h3 class="flex items-center mb-1 text-lg font-semibold text-white">
						{item.title}{" "}
						{isLatest && (
							<span class="text-sm font-medium mr-2 px-2.5 py-0.5 rounded bg-slate-50 text-slate-950 ml-3">
								Latest
							</span>
						)}
					</h3>
					<time class="block mb-2 text-sm font-normal leading-none text-gray-500">
						{from.getFullYear()} -{" "}
						{today ? "Today" : to.getFullYear()}
					</time>
					{isWork && item.position && (
						<p class="block mb-2 text-sm font-normal leading-none text-purple-400">
							{item.position}
						</p>
					)}
					<p class="mb-4 text-base font-normal text-gray-300 mt-4">
						{item.description}
					</p>
				</li>
			);
		})
	}
</ol>
